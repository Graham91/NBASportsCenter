<!DOCTYPE HTML>
<html>

<head>
    <title>EGCB Sportscenter</title>
    <meta name="description" content="website description" />
    <meta name="keywords" content="website keywords, website keywords" />
    <meta http-equiv="content-type" content="text/html; charset=windows-1252" />
    <link rel="stylesheet" type="text/css" href="/assests/css/reset.css" />
    <link rel="stylesheet" type="text/css" href="/assests/css/style.css" />
    <script src="https://code.jquery.com/jquery.js"></script>
</head>

<body>
    <div class="displayflex">
        <div class="upperdiv redback redborder">

            <div id="outsideimagediv">
                <div id="imagediv" class="redborder">
                    <!-- <img id="id1"> -->
                </div>
            </div>
            <div class="upperdiv2 redback"></div>
            <div class="upperdiv3 blueborder1"></div>
            <div class="upperdiv4 blueborder1"></div>
            <div class="upperdiv5 blueborder2"></div>
            <div class="upperdiv6 blueborder blueback"></div>
        </div>
        <div class="upperdiv7 blueborder blueback"></div>
        <div class="upperdiv8 blueborder2"></div>
        <div class="upperdiv9 blueback"></div>

        <div id="colormain">
            <div class="color1" id="leftbox">
                <div class="color2">

                </div>
            </div>
        </div>

    </div>
    <div class="grid-container">
        <div class="grid-item">
            <div class="inner"></div>
            <div class="examplediv" id="hi"></div>
            <div class="examplediv1"></div>
            <div class="examplediv2"></div>
        </div>
        <div class="mainappdiv hide1">
            <table style="width:100%">
                <tr>
                    <th>#</th>
                    <th>Player</th>
                    <th>Position</th>
                    <th>Height</th>
                    <th>Weight</th>
                </tr>
            </table>
        </div>

        <div class="mainappdiv2 hide2">
            <!-- <div class="relativediv"> -->

            <div id="imagedivbackground">
                <div class="gradient">
                </div>
            </div>
            <div id="playerpicturebackground">

            </div>
            <div class="playerInfoForIndiv">
                <P id=playernameForIndiv></P>
                <P id=playerpositionForIndiv></P>
                <P id=playerheightForIndiv></P>
                <P id=playerwieghtForIndiv></P>

            </div>

            <div>
                <table style="width:60%" class="individualPlayertable2">
                    <tr>
                        <th>

                        </th>
                        <th>Career Stats</th>
                        <th>Current Season Stats</th>
                    </tr>
                    <tr>

                        <td>
                            <div class="playstatsvalue">Minuets Played</div>
                        </td>
                        <td id="minC"></td>
                        <td id="min"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Assists</div>
                        </td>
                        <td id="assistsC"></td>
                        <td id="assists"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Blocks</div>
                        </td>
                        <td id="blocksC"></td>
                        <td id="blocks"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Games Played</div>
                        </td>
                        <td id="gamesPlayedC"></td>
                        <td id="gamesPlayed"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Games Started</div>
                        </td>
                        <td id="gamesStartedC"></td>
                        <td id="gamesStarted"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Total Rebounds</div>
                        </td>
                        <td id="totRebC"></td>
                        <td id="totReb"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Offensive Rebounds</div>
                        </td>
                        <td id="offRebC"></td>
                        <td id="offReb"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Defensive Rebounds</div>
                        </td>
                        <td id="defRebC"></td>
                        <td id="defReb"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Field Goal Percentage</div>
                        </td>
                        <td id="fgpC"></td>
                        <td id="fgp"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Three Pointers Made</div>
                        </td>
                        <td id="tpmC"></td>
                        <td id="tpm"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Three Pointers Attempted</div>
                        </td>
                        <td id="tpaC"></td>
                        <td id="tpa"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Steals</div>
                        </td>
                        <td id="stealsC"></td>
                        <td id="steals"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Turnovers</div>
                        </td>
                        <td id="turnoversC"></td>
                        <td id="turnovers"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Personal Fouls</div>
                        </td>
                        <td id="pFoulsC"></td>
                        <td id="pFouls"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Points</div>
                        </td>
                        <td id="pointsC"></td>
                        <td id="points"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Points Per Game</div>
                        </td>
                        <td id="ppgC"></td>
                        <td id="ppg"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Three Point Percentage</div>
                        </td>
                        <td id="tppC"></td>
                        <td id="tpp"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Steals Per Game</div>
                        </td>
                        <td id="spgC"></td>
                        <td id="spg"></td>
                    </tr>
                    <tr>

                        <td>
                            <div class="playstatsvalue">Blocks Per Game</div>
                        </td>
                        <td id="bpgC"></td>
                        <td id="bpg"></td>
                    </tr>
                    <tr>

                        <td>
                            <div class="playstatsvalue">Minuets Per Game</div>
                        </td>
                        <td id="mpgC"></td>
                        <td id="mpg"></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="playstatsvalue">Rebounds Per Game</div>
                        </td>
                        <td id="rpgC"></td>
                        <td id="rpg"></td>
                    </tr>
                </table>

            </div>

        </div>
        <div id="imagedivbackground2">
        </div>

    </div>
    <footer class="redback">
        <div class="upperdiv11 redback"></div>
        <div class="upperdiv10 blueborder3"></div>
        <div class="upperdiv12 blueback"></div>
    </footer>
    </div>
    <script>
        let data;
        let logourl;
        let color124;
        let color125;
        let playerpicture;
        let playerindex = [];
        $(document).ready(function () {

            console.log("ready!");
            var url = window.location.pathname;
            var id = url.substring(url.lastIndexOf('/') + 1);
            console.log(id);

            $(".inner").on("click", function () {
                console.log("hi");
                $(".hide1").css("display", "block");
                $.ajax("/api/getplayers/" + id, {
                    type: "GET"
                }).then(function (data) {

                    console.log(data);
                    playerindex = data;
                    console.log(playerindex);

                    data.forEach((element, index) => {
                        console.log(index);
                        $("table tbody").append("<tr><td><div class='playerinfo'>" + element.player.number +
                            "</div></td><td><div class='getplayerstats playerinfo2' value=" + index + " id='" + element.player.image + "' name='" + element.player.url + "'>" +
                            element.player.name +
                            "</div></td><td><div class='playerinfo'>" +
                            element.player.position +
                            "</div></td><td><div class='playerinfo'>" +
                            element.player.height +
                            "</div></td><td><div class='playerinfo'>" +
                            element.player.weight +
                            "</div></tr>")


                    });
                    $('.getplayerstats').on("click", function () {
                        var target = event.target;
                        let playerurl = target.getAttribute("name");
                        let playervalue = target.getAttribute("value")
                        let playerindexnumber = parseInt(playervalue);
                        console.log(playerurl);
                        var parts = playerurl.split("/");
                        var playerid = parts[parts.length - 1];
                        playerpicture = target.getAttribute("id")

                        var playerstatsurl = {
                            url: playerid,
                            img: playerpicture
                        };
                        console.log(playerstatsurl);


                        $.get("/api/individual/" + playerid)
                            .then(function (data) {
                                let playerNameForIndivTable = playerindex[playerindexnumber].player.name;
                                let playerPositionForIndivTable = playerindex[playerindexnumber].player.position;
                                let playerNumberForIndivTable = playerindex[playerindexnumber].player.number;
                                let playerwieghtForIndivTable = playerindex[playerindexnumber].player.weight;
                                let playerheightForIndivTable = playerindex[playerindexnumber].player.height;


                                console.log(data);
                                const populatearray = [
                                    { idkey: "#minC", info: data.statistics.careerSummary.min },
                                    { idkey: "#min", info: data.statistics.latest.min },
                                    { idkey: "#assistsC", info: data.statistics.careerSummary.assists },
                                    { idkey: "#assists", info: data.statistics.latest.assists },
                                    { idkey: "#blocksC", info: data.statistics.careerSummary.blocks },
                                    { idkey: "#blocks", info: data.statistics.latest.blocks },
                                    { idkey: '#gamesPlayedC', info: data.statistics.careerSummary.gamesPlayed },
                                    { idkey: '#gamesPlayed', info: data.statistics.latest.gamesPlayed },
                                    { idkey: '#gamesStartedC', info: data.statistics.careerSummary.gamesStarted },
                                    { idkey: '#gamesStarted', info: data.statistics.latest.gamesStarted },
                                    { idkey: '#totRebC', info: data.statistics.careerSummary.totReb },
                                    { idkey: '#totReb', info: data.statistics.latest.totReb },
                                    { idkey: '#offRebC', info: data.statistics.careerSummary.offReb },
                                    { idkey: '#offReb', info: data.statistics.latest.offReb },
                                    { idkey: '#defRebC', info: data.statistics.careerSummary.defReb },
                                    { idkey: '#defReb', info: data.statistics.latest.defReb },
                                    { idkey: '#fgpC', info: data.statistics.careerSummary.fgp },
                                    { idkey: '#fgp', info: data.statistics.latest.fgp },
                                    { idkey: '#tpmC', info: data.statistics.careerSummary.tpm },
                                    { idkey: '#tpm', info: data.statistics.latest.tpm },
                                    { idkey: '#tpaC', info: data.statistics.careerSummary.tpa },
                                    { idkey: '#tpa', info: data.statistics.latest.tpa },
                                    { idkey: '#stealsC', info: data.statistics.careerSummary.steals },
                                    { idkey: '#steals', info: data.statistics.latest.steals },
                                    { idkey: '#turnoversC', info: data.statistics.careerSummary.turnovers },
                                    { idkey: '#turnovers', info: data.statistics.latest.turnovers },
                                    { idkey: '#pFoulsC', info: data.statistics.careerSummary.pFouls },
                                    { idkey: '#pFouls', info: data.statistics.latest.pFouls },
                                    { idkey: '#pointsC', info: data.statistics.careerSummary.points },
                                    { idkey: '#points', info: data.statistics.latest.points },
                                    { idkey: '#ppgC', info: data.statistics.careerSummary.ppg },
                                    { idkey: '#ppg', info: data.statistics.latest.ppg },
                                    { idkey: '#tppC', info: data.statistics.careerSummary.tpp },
                                    { idkey: '#tpp', info: data.statistics.latest.tpp },
                                    { idkey: '#spgC', info: data.statistics.careerSummary.spg },
                                    { idkey: '#spg', info: data.statistics.latest.spg },
                                    { idkey: '#bpgC', info: data.statistics.careerSummary.bpg },
                                    { idkey: '#bpg', info: data.statistics.latest.bpg },
                                    { idkey: '#mpgC', info: data.statistics.careerSummary.mpg },
                                    { idkey: '#mpg', info: data.statistics.latest.mpg },
                                    { idkey: '#rpgC', info: data.statistics.careerSummary.rpg },
                                    { idkey: '#rpg', info: data.statistics.latest.rpg }
                                ];


                                populatearray.forEach(element => {
                                    $(element.idkey).html(element.info);
                                });

                                $(".mainappdiv").css("display", "none");
                                $(".playerinfo").css("display", "none");
                                $(".playerinfo2").css("display", "none");

                                $(".mainappdiv2").css("display", "block");

                                $(".mainappdiv2").css("background-image", "url(" + logourl + ")");
                                console.log(logourl);
                                // $("#imagedivbackground2").append('<img id="theImg55" src="' + logourl + '" />');
                                $(".gradient").css("background", color125);
                                $(".gradient").css("background", "linear-gradient(180deg, " + color125 + " 0%, " + color124 + " 100%)");
                                $("#playerpicturebackground").append('<img id="playerpic" src="' + playerpicture + '" />');
                                console.log(playerNameForIndivTable)
                                $("#playernameForIndiv").html(playerNameForIndivTable);
                                $("#playerpositionForIndiv").html(playerPositionForIndivTable);
                                $("#playerheightForIndiv").html(playerwieghtForIndivTable);
                                $("#playerwieghtForIndiv").html(playerheightForIndivTable);




                            });


                    });

                });


            });

            $.ajax("/api/home/" + id, {
                type: "GET"
            }).then(function (data) {
                logourl = data.color.url;
                color124 = data.color.colors1[1];
                color125 = data.color.colors1[3];

                // // $("#theImg").css()
                // var img = $('theImg');
                // stuff needed to get the image right;
                var newImg = new Image;
                newImg.src = data.color.url;
                $(newImg).attr('id', 'theImg');
                $(newImg).on("load", function () {
                    $("#imagediv").prepend(newImg);
                    //all the stuff has to happen after.
                    let imagewidth = $("#theImg").width();
                    let imagewidth2 = parseInt(imagewidth) + 20;
                    console.log(imagewidth);
                    let left;
                    let leftstring;
                    if (imagewidth < 180) {
                        $("#theImg").css("height", "275px");
                        $("#imagediv").css("height", "305px");
                        imagewidth = $("#theImg").width();
                        // console.log(imagewidth);
                        imagewidth2 = parseInt(imagewidth) + 60;
                        left = (imagewidth2 - 200) / 2;
                        leftstring = left + "px";
                        let imagewidthstring = imagewidth2 + "px";
                        $(".grid-item").css("width", imagewidthstring);
                        $(".inner").css("width", imagewidthstring);
                        $(".examplediv").css("left", leftstring);
                        $(".examplediv1").css("left", leftstring);
                        $(".examplediv2").css("left", leftstring);
                    } else if (imagewidth > 308) {
                        imagewidth = 308;
                        imagewidth2 = parseInt(imagewidth) + 60;
                        let imagewidthstring = imagewidth2 + "px";
                        left = (imagewidth2 - 200) / 2;
                        leftstring = left + "px";
                        console.log(imagewidthstring);
                        $(".grid-item").css("width", imagewidthstring);
                        $(".inner").css("width", imagewidthstring);
                        $(".examplediv").css("left", leftstring);
                        $(".examplediv1").css("left", leftstring);
                        $(".examplediv2").css("left", leftstring);
                    } else {
                        imagewidth2 = parseInt(imagewidth) + 60;
                        let imagewidthstring = imagewidth2 + "px";
                        left = (imagewidth2 - 200) / 2;
                        leftstring = left + "px";
                        console.log(imagewidthstring);
                        $(".grid-item").css("width", imagewidthstring);
                        $(".inner").css("width", imagewidthstring);
                        $(".examplediv").css("left", leftstring);
                        $(".examplediv1").css("left", leftstring);
                        $(".examplediv2").css("left", leftstring);
                    }
                });
                // newImg.src = data.color.url;
                // $("#imagediv").prepend(newImg);
                let blueborder2string = data.color.colors1[3] + " transparent transparent transparent";
                $(".redback").css("background-color", data.color.colors1[1]);
                $(".redborder").css("border-color", data.color.colors1[1]);
                $("#theImg").css("border-color", data.color.colors1[2]);
                $(".blueborder").css("border-color", data.color.colors1[3]);
                $(".blueborder3").css("border-color", "transparent transparent " + data.color.colors1[3] + " transparent");
                $(".blueborder2").css("border-color", blueborder2string);
                $(".blueborder1").css("border-color", "transparent " + data.color.colors1[3] + " transparent transparent");
                $(".blueback").css("background-color", data.color.colors1[3]);


                // console.log(data.db.gamestats)
                // if (data.db.gamestats === false){
                //   $("#gamestats").empty()}
                // if (data.db.FavPlayer === null){
                //   $("player").empty();
                // }
                // $("#welcomeid").html("Welcome: "+ data.db.UserID)
                // $("#favteam").html("Your favorite Team is: " + data.db.FavTeam);
                // $("#favplayer").html("Your favorite Player is: " + data.db.FavPlayer);


                console.log(data.color.url);
                console.log(data);

            });
        });


        //     $(".gamestats").on("click", function(){
        //       console.log("YOU A BUTT");
        //       var url = window.location.pathname;
        //         var id = url.substring(url.lastIndexOf('/') + 1);

        //             window.location.href="/sportscentergame/"+id;


        //   });
        //   $(".pref").on("click", function(){
        //       console.log("YOU A BUTT");
        //       var url = window.location.pathname;
        //         var id = url.substring(url.lastIndexOf('/') + 1);

        //             window.location.href="/sportscenterpref/"+id;


        //   });
    </script>
</body>

</html>